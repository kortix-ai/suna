# Notification Email Template

## Overview

The notification email template is generated by the `NotificationService._get_notification_email_template()` method in `backend/core/services/notification_service.py`.

## Current HTML Template

The email uses a clean, responsive HTML template with:

- **Logo**: Kortix Suna logo at the top
- **Header**: Title with colored left border (color varies by notification type)
- **Message**: Main content in a styled box
- **Button**: "View in App" CTA button
- **Footer**: Copyright and branding info

## Notification Type Colors

- `info`: Blue (#3B82F6)
- `success`: Green (#10B981)
- `warning`: Yellow (#F59E0B)
- `error`: Red (#EF4444)
- `agent_complete`: Purple (#8B5CF6)

## Customization

### Option 1: Modify the Template Method

Edit `_get_notification_email_template()` in `notification_service.py` to change:

- Colors
- Layout
- Logo URL
- Button text/link
- Footer content
- Styling (CSS in `<style>` tag)

### Option 2: Accept Custom HTML (Future Enhancement)

To allow custom HTML in the `send_notification()` method:

1. Add an optional `custom_html_template` parameter
2. If provided, use it instead of generating the default template
3. Still apply user_name, title, message variables via string replacement

Example enhancement:

```python
async def send_notification(
    self,
    ...
    custom_html_template: Optional[str] = None,  # NEW
    ...
):
    # In _send_notification_email_with_retry:
    if custom_html_template:
        html_content = custom_html_template.format(
            user_name=user_name,
            title=title,
            message=message
        )
    else:
        html_content = self._get_notification_email_template(...)
```

## Current Template Structure

```html
<!DOCTYPE html>
<html>
<head>
  <!-- Meta tags, viewport, title -->
  <style>
    /* Inline CSS for email clients */
  </style>
</head>
<body>
  <div class="container">
    <div class="logo-container">
      <img src="[LOGO_URL]" />
    </div>
    <div class="header">
      <h1>[TITLE]</h1>
    </div>
    <p>Hi [USER_NAME],</p>
    <div class="message">
      [MESSAGE]
    </div>
    <a href="https://www.suna.so/" class="button">View in App</a>
    <div class="footer">
      <!-- Footer content -->
    </div>
  </div>
</body>
</html>
```

## Plain Text Version

The service also generates a plain text version via `_get_notification_email_text()` for email clients that don't support HTML.

