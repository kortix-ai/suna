# Песочница агента

Этот каталог содержит реализацию песочницы агента — виртуальной среды на базе Docker, которую агенты используют как собственный компьютер для выполнения задач, доступа к вебу и работы с файлами.

## Обзор

Песочница предоставляет полноценную контейнеризованную Linux‑среду со следующими компонентами:
- Браузер Chrome для веб‑взаимодействий
- Сервер VNC для доступа к Web User
- Веб‑сервер для отдачи контента (порт 8080) → загрузка HTML‑файлов из директории /workspace
- Полный доступ к файловой системе
- Полный доступ sudo

## Настройка песочницы

Вы можете изменять среду песочницы для разработки или добавления новых возможностей:

1. Редактируйте файлы в директории `docker/`
2. Соберите кастомный образ:
   ```
   cd backend/sandbox/docker
   docker compose build
   docker push kortix/suna:0.1.3.24
   ```
3. Протестируйте изменения локально с помощью docker-compose

## Использование собственного снапшота

Чтобы использовать свой собственный снапшот песочницы:

1. Измените параметр `image` в `docker-compose.yml` (там задаётся имя образа `kortix/suna:___`)
2. Соберите и создайте снапшот в Daytona с тем же именем
3. Обновите имя снапшота в `backend/sandbox/sandbox.py` в функции `create_sandbox`
4. Если используете Daytona для деплоя, обновите ссылку на снапшот и там

## Публикация новых версий

При публикации новой версии песочницы:

1. Обновите номер версии в `docker-compose.yml` (например, с `0.1.2` на `0.1.3`)
2. Соберите новый образ: `docker compose build`
3. Отправьте новую версию: `docker push kortix/suna:0.1.3`
4. Создайте новый снапшот в Daytona с тем же именем
5. Обновите все ссылки на версию снапшота в:
   - `backend/utils/config.py`
   - снапшотах Daytona
   - любых других сервисах, использующих этот снапшот

