{
  "timestamp": "2026-01-14T00:34:11.188763",
  "config": {
    "host": "localhost",
    "port": 6379,
    "pool_size": 15,
    "pool_timeout": 0.2,
    "op_timeout": 2.0,
    "mode": "quick"
  },
  "tests": [
    {
      "test": "connection_starvation",
      "description": "XREAD BLOCK operations starving GET/SET operations",
      "config": {
        "pool_size": 15,
        "blocking_readers": 20,
        "getset_workers": 5,
        "block_ms": 500,
        "op_timeout_s": 2.0,
        "duration_s": 15
      },
      "xread": {
        "total_ops": 1301
      },
      "get": {
        "attempts": 272,
        "successes": 131,
        "timeouts": 0,
        "pool_wait_failures": 140,
        "timeout_rate": 0.0,
        "avg_latency_ms": 29.192383962733146,
        "p95_latency_ms": 112.96892166137695,
        "max_latency_ms": 167.8321361541748
      },
      "set": {
        "attempts": 271,
        "successes": 129,
        "timeouts": 0
      },
      "pool_snapshots": [
        {
          "ts": 1768347257.216707,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347258.217194,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347259.218165,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 15
        },
        {
          "ts": 1768347260.218435,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 15
        },
        {
          "ts": 1768347261.2196102,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347262.220263,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347263.2214599,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347264.2227468,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347265.2235441,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 20
        },
        {
          "ts": 1768347266.224718,
          "in_use": 15,
          "available": 0,
          "max": 15,
          "blocked_readers": 15
        }
      ],
      "conclusion": "CONNECTION STARVATION REPLICATED! GET timeouts: 0 (0.0%), Pool wait failures: 140. This matches your prod issue!",
      "issue_confirmed": true
    },
    {
      "test": "mixed_workload",
      "description": "Realistic production traffic - all ops sharing one pool",
      "config": {
        "agent_runs": 3,
        "sse_clients_per_run": 3,
        "total_xread_clients": 9,
        "cache_workers": 5,
        "pool_size": 15
      },
      "operations": {
        "xread": {
          "attempts": 1314,
          "successes": 1305,
          "timeouts": 0,
          "timeout_rate": 0.0,
          "avg_latency_ms": 103.38876859438375,
          "max_latency_ms": 112.52713203430176
        },
        "xadd": {
          "attempts": 432,
          "successes": 432,
          "timeouts": 0,
          "timeout_rate": 0.0,
          "avg_latency_ms": 4.029246392073454,
          "max_latency_ms": 12.53509521484375
        },
        "get_cache": {
          "attempts": 1360,
          "successes": 1360,
          "timeouts": 0,
          "timeout_rate": 0.0,
          "avg_latency_ms": 2.7055053149952606,
          "max_latency_ms": 13.593912124633789
        },
        "get_stop_signal": {
          "attempts": 24,
          "successes": 24,
          "timeouts": 0,
          "timeout_rate": 0.0,
          "avg_latency_ms": 3.4474929173787436,
          "max_latency_ms": 13.426065444946289
        },
        "set": {
          "attempts": 1360,
          "successes": 1360,
          "timeouts": 0,
          "timeout_rate": 0.0,
          "avg_latency_ms": 1.5683565069647396,
          "max_latency_ms": 10.8489990234375
        }
      },
      "conclusion": "Mixed workload handled OK - no timeouts observed",
      "issues_found": false
    },
    {
      "test": "pool_exhaustion",
      "description": "Burst traffic exceeding pool capacity",
      "config": {
        "bursts": 5,
        "burst_size": 30,
        "pool_size": 15,
        "pool_timeout_s": 0.2
      },
      "totals": {
        "requests": 150,
        "successes": 150,
        "pool_timeouts": 0,
        "op_timeouts": 0,
        "success_rate": 1.0
      },
      "latency": {
        "avg_ms": 7.293616930643718,
        "max_ms": 13.852119445800781
      },
      "bursts": [
        {
          "burst": 1,
          "successes": 30,
          "total": 30,
          "pool_timeouts": 0,
          "avg_latency_ms": 11.934041976928711
        },
        {
          "burst": 2,
          "successes": 30,
          "total": 30,
          "pool_timeouts": 0,
          "avg_latency_ms": 6.53070608774821
        },
        {
          "burst": 3,
          "successes": 30,
          "total": 30,
          "pool_timeouts": 0,
          "avg_latency_ms": 5.577023824055989
        },
        {
          "burst": 4,
          "successes": 30,
          "total": 30,
          "pool_timeouts": 0,
          "avg_latency_ms": 4.33804988861084
        },
        {
          "burst": 5,
          "successes": 30,
          "total": 30,
          "pool_timeouts": 0,
          "avg_latency_ms": 8.088262875874836
        }
      ],
      "conclusion": "Pool handled burst traffic OK",
      "issue_confirmed": false
    },
    {
      "test": "split_pool_solution",
      "description": "Testing fix: separate pools for blocking vs non-blocking ops",
      "config": {
        "blocking_readers": 20,
        "getset_workers": 5,
        "general_pool_size": 15,
        "stream_pool_size": 25
      },
      "get": {
        "attempts": 1354,
        "successes": 1354,
        "timeouts": 0,
        "timeout_rate": 0.0,
        "avg_latency_ms": 4.083257306097529
      },
      "xread_ops": 90147,
      "conclusion": "SPLIT POOL FIX WORKS! 0 GET timeouts with 20 blocking readers. Avg latency: 4.1ms",
      "fix_verified": true
    }
  ]
}