# Railway Environment Configuration Example
# Copy this file to .env.railway and fill in your actual values
# These variables are used for both Railway deployment and local testing

# ==============================================================================
# REQUIRED CONFIGURATION
# ==============================================================================

# Supabase Configuration (REQUIRED)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# LLM Provider API Keys (at least one REQUIRED)
ANTHROPIC_API_KEY=your-anthropic-api-key
OPENAI_API_KEY=your-openai-api-key
GROQ_API_KEY=your-groq-api-key

# Search API Keys (at least one REQUIRED)
TAVILY_API_KEY=your-tavily-api-key
RAPID_API_KEY=your-rapid-api-key

# Web Scraping (REQUIRED)
FIRECRAWL_API_KEY=your-firecrawl-api-key

# ==============================================================================
# REDIS CONFIGURATION (Auto-configured by Railway)
# ==============================================================================

# For local testing with docker-compose, use these values:
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_SSL=false

# For Railway deployment, use these (Railway auto-injects):
# REDIS_HOST=${{Redis.REDIS_HOST}}
# REDIS_PORT=${{Redis.REDIS_PORT}}
# REDIS_PASSWORD=${{Redis.REDIS_PASSWORD}}
# REDIS_SSL=true

# ==============================================================================
# BACKEND API CONFIGURATION
# ==============================================================================

ENV_MODE=production

# Worker Configuration (Railway optimized defaults)
MIN_WORKERS=2
MAX_WORKERS=4
THREADS=2
WORKER_CONNECTIONS=1000

# ==============================================================================
# WORKER CONFIGURATION
# ==============================================================================

# Dramatiq Worker Settings (Railway optimized defaults)
MIN_PROCESSES=2
MAX_PROCESSES=4
THREADS_PER_PROCESS=4

# ==============================================================================
# FRONTEND CONFIGURATION
# ==============================================================================

# Build-time environment variables (must be set before build)
NEXT_PUBLIC_ENV_MODE=production
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Backend API URL
# For local: http://localhost:8000/api
# For Railway: https://${{backend-api.RAILWAY_PUBLIC_DOMAIN}}/api
NEXT_PUBLIC_BACKEND_URL=http://localhost:8000/api

# Frontend URL
# For local: http://localhost:3000
# For Railway: https://${{frontend.RAILWAY_PUBLIC_DOMAIN}}
NEXT_PUBLIC_URL=http://localhost:3000

# ==============================================================================
# OPTIONAL SERVICES
# ==============================================================================

# E2B Code Interpreter
E2B_API_KEY=your-e2b-api-key

# Daytona Sandbox
DAYTONA_API_KEY=your-daytona-api-key
DAYTONA_SERVER_URL=https://your-daytona-server.com

# Observability - Langfuse
LANGFUSE_PUBLIC_KEY=your-langfuse-public-key
LANGFUSE_SECRET_KEY=your-langfuse-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com

# Error Tracking - Sentry
SENTRY_DSN=your-sentry-dsn

# Billing - Stripe
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# Additional LLM Providers
GEMINI_API_KEY=your-gemini-api-key
XAI_API_KEY=your-xai-api-key

# AWS (for Bedrock LLM access)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION_NAME=us-west-2

# OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Composio Integration
COMPOSIO_API_KEY=your-composio-api-key

# Analytics
NEXT_PUBLIC_POSTHOG_KEY=your-posthog-key

# Admin Access
KORTIX_ADMIN_API_KEY=your-admin-api-key

# ==============================================================================
# RAILWAY-SPECIFIC NOTES
# ==============================================================================

# 1. Railway auto-injects service references using ${{service.VARIABLE}} syntax
# 2. Set all required variables in Railway dashboard under each service
# 3. Frontend build-time variables (NEXT_PUBLIC_*) must be set before deployment
# 4. Redis connection details are auto-configured when you add Redis plugin
# 5. Use Railway's generated domains for NEXT_PUBLIC_BACKEND_URL and NEXT_PUBLIC_URL

# ==============================================================================
# LOCAL TESTING
# ==============================================================================

# To test Railway Dockerfiles locally:
# 1. Copy this file to .env.railway
# 2. Fill in your actual API keys and credentials
# 3. Run: docker compose -f railway.docker-compose.yml --env-file .env.railway up

# To build individual services:
# docker build -f railway.backend.Dockerfile -t kortix-backend:railway .
# docker build -f railway.worker.Dockerfile -t kortix-worker:railway .
# docker build -f railway.frontend.Dockerfile -t kortix-frontend:railway .
